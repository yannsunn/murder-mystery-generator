# ğŸ¯ Cursor Rules - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¥ç’°å¢ƒå¤‰æ•°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

### ğŸ—ï¸ ç’°å¢ƒå¤‰æ•°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
```
murder_mystery_netlify/
â”œâ”€â”€ .env                           # é–‹ç™ºç’°å¢ƒï¼ˆgitignoreå¯¾è±¡ï¼‰
â”œâ”€â”€ .env.local                     # ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºå°‚ç”¨ï¼ˆgitignoreå¯¾è±¡ï¼‰
â”œâ”€â”€ .env.example                   # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆGitç®¡ç†å¯¾è±¡ï¼‰
â”œâ”€â”€ .env.production               # æœ¬ç•ªç’°å¢ƒè¨­å®šï¼ˆGitç®¡ç†å¯¾è±¡ï¼‰
â”œâ”€â”€ env-configs/                  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¥è¨­å®š
â”‚   â”œâ”€â”€ shared.env               # å…±é€šè¨­å®š
â”‚   â””â”€â”€ murder-mystery.env       # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰è¨­å®š
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ env-loader.js            # ç’°å¢ƒå¤‰æ•°ãƒ­ãƒ¼ãƒ€ãƒ¼
â”‚   â””â”€â”€ project-manager.js       # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
â””â”€â”€ README-PROJECT-MANAGEMENT.md # ç®¡ç†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

### ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¥Supabaseç®¡ç†

#### ğŸ­ Murder Mystery Generator
```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: murder-mystery
Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: cjnsewifvnhakvhqlgoy
URL: https://cjnsewifvnhakvhqlgoy.supabase.co
```

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ:**
- **scenarios** ãƒ†ãƒ¼ãƒ–ãƒ«: ç”Ÿæˆã•ã‚ŒãŸã‚·ãƒŠãƒªã‚ªã®ä¿å­˜
  - id (UUID, Primary Key)
  - title (text)
  - description (text)
  - characters (jsonb)
  - scenario_data (jsonb)
  - created_at (timestamp)
  - updated_at (timestamp)

- **user_sessions** ãƒ†ãƒ¼ãƒ–ãƒ«: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
  - id (UUID, Primary Key)
  - session_id (text, Unique)
  - user_data (jsonb)
  - last_activity (timestamp)
  - created_at (timestamp)

**Row Level Security (RLS):**
- åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹èª­ã¿å–ã‚Šãƒ»æ›¸ãè¾¼ã¿è¨±å¯
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿åˆ†é›¢

**APIä½¿ç”¨çŠ¶æ³:**
- ã‚·ãƒŠãƒªã‚ªç”Ÿæˆ: GROQ APIï¼ˆä¸»ï¼‰/ OpenAI APIï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
- ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–: Supabase Database
- ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›: JSZipï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ï¼‰

#### ğŸš€ Project Aï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰
```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: project-a
Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: [æœªè¨­å®š]
URL: [æœªè¨­å®š]
```

**äºˆå®šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ:**
- **users** ãƒ†ãƒ¼ãƒ–ãƒ«: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
- **projects** ãƒ†ãƒ¼ãƒ–ãƒ«: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
- **activities** ãƒ†ãƒ¼ãƒ–ãƒ«: ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ­ã‚°

#### ğŸ¯ Project Bï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰
```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: project-b
Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: [æœªè¨­å®š]
URL: [æœªè¨­å®š]
```

**äºˆå®šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ:**
- **items** ãƒ†ãƒ¼ãƒ–ãƒ«: ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†
- **categories** ãƒ†ãƒ¼ãƒ–ãƒ«: ã‚«ãƒ†ã‚´ãƒªç®¡ç†
- **analytics** ãƒ†ãƒ¼ãƒ–ãƒ«: åˆ†æãƒ‡ãƒ¼ã‚¿

## ğŸ”§ é–‹ç™ºãƒ«ãƒ¼ãƒ«

### 1. ç’°å¢ƒå¤‰æ•°ç®¡ç†
```bash
# æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚
1. env-configs/{project-name}.env ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
2. scripts/project-manager.js ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šè¿½åŠ 
3. npm run project:load {project-name} ã§èª­ã¿è¾¼ã¿ç¢ºèª
4. npm run project:health {project-name} ã§æ¤œè¨¼
```

### 2. Supabaseè¨­å®šãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å¿…é ˆç’°å¢ƒå¤‰æ•°
SUPABASE_URL=https://{project-id}.supabase.co
SUPABASE_ANON_KEY={anon-key}
SUPABASE_SERVICE_KEY={service-key}  // ç®¡ç†æ©Ÿèƒ½ç”¨

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰è¨­å®š
PROJECT_NAME={project-name}
PROJECT_VERSION={version}
DATABASE_URL=sqlite://./data/{project-name}.db  // ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨
```

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆåŸå‰‡
- **UUIDä¸»ã‚­ãƒ¼**: å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã§UUIDã‚’ä½¿ç”¨
- **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—**: created_at, updated_at ã‚’å¿…é ˆã¨ã™ã‚‹
- **JSONBæ´»ç”¨**: æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«JSONBã‚’ä½¿ç”¨
- **RLSæœ‰åŠ¹**: å¿…è¦ã«å¿œã˜ã¦Row Level Securityã‚’è¨­å®š

### 4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
```sql
-- RLSæœ‰åŠ¹åŒ–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
ALTER TABLE {table_name} ENABLE ROW LEVEL SECURITY;

-- åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒªã‚·ãƒ¼ä¾‹
CREATE POLICY "Allow anonymous access" ON {table_name}
    FOR ALL USING (true);

-- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ãƒãƒªã‚·ãƒ¼ä¾‹
CREATE POLICY "Session-based access" ON {table_name}
    FOR ALL USING (session_id = current_setting('app.session_id'));
```

## ğŸš€ æ“ä½œã‚³ãƒãƒ³ãƒ‰

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§è¡¨ç¤º
npm run project:list

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª­ã¿è¾¼ã¿
npm run project:load {project-name}

# ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹è¡¨ç¤º
npm run project:status

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
npm run project:health {project-name}

# å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
npm run project:check-all

# Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤
npm run project:deploy {project-name} {environment}
```

### ç’°å¢ƒå¤‰æ•°ç®¡ç†
```bash
# ç’°å¢ƒå¤‰æ•°èª­ã¿è¾¼ã¿
npm run env:load {project-name}

# ç’°å¢ƒå¤‰æ•°çŠ¶æ…‹è¡¨ç¤º
npm run env:status

# ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ
npm run env:example
```

## ğŸ“Š æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¿½åŠ æ‰‹é †

### 1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- RLSè¨­å®šãƒ»ãƒãƒªã‚·ãƒ¼ä½œæˆ
- API Keyså–å¾—

### 2. ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
```bash
# env-configs/{project-name}.env
SUPABASE_URL=https://{project-id}.supabase.co
SUPABASE_ANON_KEY={anon-key}
SUPABASE_SERVICE_KEY={service-key}
PROJECT_NAME={project-name}
PROJECT_VERSION=1.0.0
DATABASE_URL=sqlite://./data/{project-name}.db
```

### 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è¨­å®š
```javascript
// scripts/project-manager.js ã®PROJECT_CONFIGS ã«è¿½åŠ 
'{project-name}': {
  name: '{Project Display Name}',
  description: '{Project Description}',
  requiredVars: ['GROQ_API_KEY', 'SUPABASE_URL', 'SUPABASE_ANON_KEY'],
  optionalVars: ['OPENAI_API_KEY', 'SUPABASE_SERVICE_KEY'],
  vercelProject: '{vercel-project-name}'
}
```

### 4. ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã‚’ä¸Šè¨˜ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¥Supabaseç®¡ç†ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ 
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆã‚’è©³ç´°ã«è¨˜è¿°
- ç‰¹æœ‰ã®è¨­å®šãƒ»åˆ¶ç´„äº‹é …ã‚’è¨˜è¼‰

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### API Keyç®¡ç†
- æœ¬ç•ªç’°å¢ƒã®ã‚­ãƒ¼ã¯`.env.local`ã¾ãŸã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†
- é–‹ç™ºç’°å¢ƒç”¨ã¨ãƒ†ã‚¹ãƒˆç’°å¢ƒç”¨ã‚’åˆ†é›¢
- å®šæœŸçš„ãªã‚­ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- RLSï¼ˆRow Level Securityï¼‰ã®é©åˆ‡ãªè¨­å®š
- æœ€å°æ¨©é™ã®åŸå‰‡ã§ãƒãƒªã‚·ãƒ¼ä½œæˆ
- æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®æš—å·åŒ–

### Vercelãƒ‡ãƒ—ãƒ­ã‚¤
- ç’°å¢ƒå¤‰æ•°ã®æš—å·åŒ–è¨­å®š
- ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
- ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ã®æ´»ç”¨

## ğŸ¯ é–‹ç™ºãƒ•ãƒ­ãƒ¼

### 1. æ—¥å¸¸é–‹ç™º
```bash
# 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª­ã¿è¾¼ã¿
npm run project:load murder-mystery

# 2. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# 3. æ©Ÿèƒ½å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ
npm run test

# 4. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
npm run project:health murder-mystery
```

### 2. ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™
```bash
# 1. å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ç¢ºèª
npm run project:check-all

# 2. ç’°å¢ƒå¤‰æ•°ç¢ºèª
npm run env:status

# 3. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
npm run project:deploy murder-mystery production
```

## ğŸ“ˆ æ‹¡å¼µè¨ˆç”»

### äºˆå®šæ©Ÿèƒ½
- [ ] è¤‡æ•°Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ã®ãƒ‡ãƒ¼ã‚¿åŒæœŸ
- [ ] ç’°å¢ƒå¤‰æ•°ã®æš—å·åŒ–ç®¡ç†
- [ ] è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½
- [ ] ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯æ‹¡å¼µ
- [ ] PostgreSQLç›´æ¥æ¥ç¶šå¯¾å¿œ
- [ ] Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥å±¤è¿½åŠ 
- [ ] GraphQL APIå±¤è¿½åŠ 
- [ ] WebSocket ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡

---

**ğŸ¯ ã“ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ã€åŠ¹ç‡çš„ã§å®‰å…¨ãªãƒãƒ«ãƒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹ç™ºã‚’å®Ÿç¾ã—ã¾ã™ã€‚**