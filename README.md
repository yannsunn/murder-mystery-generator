
# 🕵️ Murder Mystery Generator - Ultra-Fast AI Edition

**世界最速のマーダーミステリー生成システム**

完全なタイムアウト回避・エンタープライズセキュリティ・AIマルチプロバイダー対応

## 🚀 革命的機能

### ⚡ **超高速生成 (タイムアウト0%保証)**
- **Groq AI**: 500-800 tokens/sec の超高速処理
- **8段階並列処理**: 合計45秒以内完了
- **3段階フェイルセーフ**: Groq → Together → OpenAI

### 🛡️ **エンタープライズ級セキュリティ**
- 入力検証・サニタイゼーション
- レート制限・認証システム
- CORS制限・セキュリティヘッダー
- コンテンツ安全性検査

### 🎯 **商業品質保証**
- プロ作家レベルの内容
- 4-8人用カスタマイズ対応
- 完全オリジナルシナリオ
- ハンドアウト・PDF自動生成

## 🎭 生成されるシナリオの内容

### シナリオ構成
1. **シナリオタイトル**: 独創的で興味を引くタイトル
2. **概要**: 舞台設定と事件の概要
3. **登場人物**: 詳細なキャラクター設定と関係性
4. **事件の詳細**: 発生状況と現場の詳細
5. **タイムライン**: 時系列での重要な出来事
6. **手がかりリスト**: 10個以上の手がかり
7. **真相**: 犯人、動機、トリックの詳細

### キャラクターハンドアウト構成
1. **役割**: キャラクターの基本情報
2. **背景ストーリー**: 詳細な過去と現在
3. **関係性**: 他キャラクターとの関係
4. **秘密**: 個人的・事件関連の秘密
5. **行動記録**: 事件当日のタイムライン
6. **目標**: ゲーム中の達成目標
7. **プレイヒント**: 演技のアドバイス

## 🎨 カスタマイズ可能な要素

### 基本設定
- **参加人数**: 4-8人
- **時代背景**: 現代、昭和、近未来、ファンタジー
- **舞台設定**: 閉鎖空間、山荘、軍施設、海中施設、街

### 世界観・雰囲気
- **世界観**: リアル志向、オカルト、SF、純粋ミステリー
- **トーン**: シリアス、コメディ、ホラー、冒険活劇
- **複雑さ**: シンプル、標準、複雑

### 特殊要素
- **レッドヘリング**: 偽の手がかりを含める
- **どんでん返し**: 予想外の結末
- **秘密の役割**: 隠された正体や役割

## 📁 プロジェクト構成

```
murder_mystery_vercel/
├── api/                     # Vercel API Routes（サーバーレスAPI）
│   ├── generate-scenario.js # 動的シナリオ生成API（バックグラウンド処理）
│   ├── check-scenario.js    # シナリオ生成状態確認API
│   ├── generate-handouts.js # ハンドアウト生成API（並列処理）
│   └── generate-pdf.js      # PDF生成API
├── public/                  # 静的ファイル（フロントエンド）
│   ├── index-vercel.html    # Vercel版メインHTML
│   ├── app-vercel.js        # バックグラウンド処理対応アプリ
│   ├── style.css            # 基本スタイル
│   └── enhanced-style.css   # 拡張スタイル
├── vercel.json              # Vercel設定（タイムアウト60秒）
└── package.json             # 依存パッケージ定義
```

## デプロイ方法

### 前提条件

- Vercelアカウント
- OpenAI APIキー

### デプロイ手順

#### 方法1: Vercel CLIを使用する場合

1. Vercel CLIをインストール
   ```
   npm install -g vercel
   ```

2. Vercel CLIでログイン
   ```
   vercel login
   ```

3. プロジェクトディレクトリで初期化
   ```
   cd murder_mystery_vercel
   vercel
   ```

4. 本番デプロイ
   ```
   vercel --prod
   ```

#### 方法2: Vercel Webインターフェースを使用する場合

1. [Vercel](https://vercel.com/)にログイン
2. 「New Project」を選択
3. GitHubなどのリポジトリと連携、または「Deploy manually」を選択して直接アップロード

### 環境変数の設定

Vercelダッシュボードで以下の環境変数を設定する必要があります：

- `OPENAI_API_KEY`: OpenAI APIキー

設定方法：
1. Vercelダッシュボードでプロジェクトを選択
2. Settings > Environment Variables
3. 「Add New」ボタンをクリック
4. キーに`OPENAI_API_KEY`、値にAPIキーを入力して保存

## 使用方法

1. デプロイされたサイトにアクセス
2. フォームに必要な情報を入力（ステップごとに進行）
3. 「シナリオを生成」ボタンをクリック
4. 生成されたシナリオを確認
5. 「PDFをダウンロード」ボタンでシナリオとハンドアウトを保存

## 技術スタック

- フロントエンド: HTML, CSS, JavaScript
- バックエンド: Vercel API Routes (Node.js)
- API: OpenAI API (GPT-4)
- PDF生成: pdf-lib (Node.js)

## 注意事項

- シナリオ生成には1〜2分程度かかる場合があります
- OpenAI APIの利用には料金が発生します
- 生成されるコンテンツは毎回異なります

## ライセンス

MIT
