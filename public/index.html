<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Murder Mystery Generator - Professional Edition</title>
  <meta name="description" content="ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«å“è³ªã®ãƒãƒ¼ãƒ€ãƒ¼ãƒŸã‚¹ãƒ†ãƒªãƒ¼ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ">
  <meta name="theme-color" content="#6d28d9">
  <meta name="color-scheme" content="dark light">
  
  <!-- PWAå¯¾å¿œ -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Murder Mystery Generator">
  
  <!-- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ -->
  <meta name="robots" content="index, follow">
  <meta name="author" content="Murder Mystery Generator Team">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="ultra-modern-styles.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%236d28d9'/><text y='65' x='50' text-anchor='middle' font-size='60' fill='white'>M</text></svg>">
</head>
<body>
  <header>
    <h1>Murder Mystery Generator</h1>
    <p>AIé§†å‹•ãƒãƒ¼ãƒ€ãƒ¼ãƒŸã‚¹ãƒ†ãƒªãƒ¼ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ </p>
  </header>

  <main class="main-container">
    <div class="card" id="main-card">
      <div class="card-header">
        <h2>ã‚·ãƒŠãƒªã‚ªç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ </h2>
        <p>ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«å“è³ªã®ãƒãƒ¼ãƒ€ãƒ¼ãƒŸã‚¹ãƒ†ãƒªãƒ¼ã‚·ãƒŠãƒªã‚ªã‚’åŠ¹ç‡çš„ã«ç”Ÿæˆ</p>
      </div>
      
      <!-- çµ±åˆãƒ•ã‚©ãƒ¼ãƒ  -->
      <form id="scenario-form" class="form-container">
        <div class="form-section">
          <h3 class="text-gradient">ğŸ® åŸºæœ¬è¨­å®š</h3>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="participants" class="form-label">ğŸ‘¥ å‚åŠ äººæ•°</label>
              <select id="participants" name="participants" class="form-control" required>
                <option value="4">4äºº (ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆ)</option>
                <option value="5" selected>5äºº (æ¨å¥¨)</option>
                <option value="6">6äºº (æ¨™æº–)</option>
                <option value="7">7äºº (å¤§è¦æ¨¡)</option>
                <option value="8">8äºº (ã‚¨ãƒ”ãƒƒã‚¯)</option>
              </select>
              <div class="form-hint">æ¨å¥¨ã¯5-6äººã§ã™</div>
            </div>
            
            <div class="form-group">
              <label for="era" class="form-label">â° æ™‚ä»£èƒŒæ™¯</label>
              <select id="era" name="era" class="form-control" required>
                <option value="modern" selected>ğŸ™ï¸ ç¾ä»£ (2020å¹´ä»£)</option>
                <option value="showa">ğŸ® æ˜­å’Œ (1926-1989)</option>
                <option value="near-future">ğŸš€ è¿‘æœªæ¥ (2030å¹´ä»£)</option>
                <option value="fantasy">ğŸ° ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="setting" class="form-label">ğŸ¢ èˆå°è¨­å®š</label>
              <select id="setting" name="setting" class="form-control" required>
                <option value="closed-space" selected>ğŸ  é–‰é–ç©ºé–“ (å¯†å®¤)</option>
                <option value="mountain-villa">ğŸ”ï¸ å±±è˜ (éš”é›¢)</option>
                <option value="military-facility">âš”ï¸ è»äº‹æ–½è¨­</option>
                <option value="underwater-facility">ğŸŒŠ æµ·ä¸­æ–½è¨­</option>
                <option value="city">ğŸŒ† éƒ½å¸‚éƒ¨</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="text-gradient">ğŸŒŸ ä¸–ç•Œè¦³ã¨ãƒˆãƒ¼ãƒ³</h3>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="worldview" class="form-label">ğŸŒ ä¸–ç•Œè¦³</label>
              <select id="worldview" name="worldview" class="form-control">
                <option value="realistic" selected>ğŸ“± ãƒªã‚¢ãƒ«å¿—å‘ (ç¾å®Ÿçš„)</option>
                <option value="occult">ğŸ‘» ã‚ªã‚«ãƒ«ãƒˆè¦ç´ ã‚ã‚Š</option>
                <option value="sci-fi">ğŸ›¸ SFè¦ç´ ã‚ã‚Š</option>
                <option value="mystery">ğŸ” ç´”ç²‹ãƒŸã‚¹ãƒ†ãƒªãƒ¼</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="tone" class="form-label">ğŸ­ é›°å›²æ°—</label>
              <select id="tone" name="tone" class="form-control">
                <option value="serious" selected>ğŸ˜¤ ã‚·ãƒªã‚¢ã‚¹ (æœ¬æ ¼æ´¾)</option>
                <option value="light">ğŸ˜Š ãƒ©ã‚¤ãƒˆ (ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«)</option>
                <option value="horror">ğŸ˜± ãƒ›ãƒ©ãƒ¼ (ææ€–)</option>
                <option value="comedy">ğŸ¤£ ã‚³ãƒ¡ãƒ‡ã‚£ (ç¬‘ã„)</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="complexity" class="form-label">âš™ï¸ é›£æ˜“åº¦</label>
              <select id="complexity" name="complexity" class="form-control">
                <option value="simple">ğŸ”° ç°¡å˜ (30åˆ†)</option>
                <option value="standard" selected>âš–ï¸ æ¨™æº– (45åˆ†)</option>
                <option value="complex">ğŸ§  è¤‡é›‘ (60åˆ†)</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="text-gradient">ğŸ” äº‹ä»¶è¨­å®š</h3>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="motive" class="form-label">ğŸ’° çŠ¯è¡Œå‹•æ©Ÿ</label>
              <select id="motive" name="motive" class="form-control">
                <option value="random" selected>ğŸ² ãŠã¾ã‹ã› (AIé¸æŠ)</option>
                <option value="money">ğŸ’° é‡‘éŠ­å•é¡Œ</option>
                <option value="revenge">âš”ï¸ å¾©è®</option>
                <option value="love">ğŸ’” æ‹æ„›é–¢ä¿‚</option>
                <option value="jealousy">ğŸ˜¡ å«‰å¦¬</option>
                <option value="secret">ğŸ¤« ç§˜å¯†ã®ç™ºè¦š</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="victim-type" class="form-label">ğŸ‘¤ è¢«å®³è€…ã‚¿ã‚¤ãƒ—</label>
              <select id="victim-type" name="victim-type" class="form-control">
                <option value="random" selected>ğŸ² ãŠã¾ã‹ã› (AIé¸æŠ)</option>
                <option value="wealthy">ğŸ’ è³‡ç”£å®¶</option>
                <option value="celebrity">â­ æœ‰åäºº</option>
                <option value="businessman">ğŸ’¼ å®Ÿæ¥­å®¶</option>
                <option value="ordinary">ğŸ‘¥ ä¸€èˆ¬äºº</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="weapon" class="form-label">ğŸ”ª å‡¶å™¨</label>
              <select id="weapon" name="weapon" class="form-control">
                <option value="random" selected>ğŸ² ãŠã¾ã‹ã› (AIé¸æŠ)</option>
                <option value="knife">ğŸ”ª åˆƒç‰©</option>
                <option value="poison">â˜ ï¸ æ¯’ç‰©</option>
                <option value="blunt">ğŸ”¨ éˆå™¨</option>
                <option value="unusual">ğŸ”§ å¤‰ã‚ã£ãŸç‰©</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="text-gradient">ğŸ¨ ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š</h3>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="generate-images" class="checkbox-label">
                <input type="checkbox" id="generate-images" name="generate-images" value="true" checked>
                <span class="checkmark"></span>
                ğŸ–¼ï¸ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã‚’ç”Ÿæˆã™ã‚‹
              </label>
              <div class="form-hint">AIç”Ÿæˆã«ã‚ˆã‚‹ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¤ãƒ©ã‚¹ãƒˆä»˜ã</div>
            </div>
            
            <div class="form-group">
              <label for="detailed-handouts" class="checkbox-label">
                <input type="checkbox" id="detailed-handouts" name="detailed-handouts" value="true" checked>
                <span class="checkmark"></span>
                ğŸ“œ è©³ç´°ãªãƒãƒ³ãƒ‰ã‚¢ã‚¦ãƒˆã‚’ä½œæˆ
              </label>
              <div class="form-hint">ã‚ˆã‚Šè©³ã—ã„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®š</div>
            </div>
            
            <div class="form-group">
              <label for="gm-support" class="checkbox-label">
                <input type="checkbox" id="gm-support" name="gm-support" value="true" checked>
                <span class="checkmark"></span>
                ğŸ“ GMæ”¯æ´ãƒ„ãƒ¼ãƒ«ä»˜ã
              </label>
              <div class="form-hint">é€²è¡Œç®¡ç†ã¨ãƒ’ãƒ³ãƒˆæ©Ÿèƒ½</div>
            </div>
          </div>
        </div>

        <!-- ã‚«ã‚¹ã‚¿ãƒ è¦æ±‚ -->
        <div class="form-section">
          <h3 class="text-gradient">âœï¸ ã‚«ã‚¹ã‚¿ãƒ è¦æ±‚ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)</h3>
          <div class="form-group">
            <label for="custom-request" class="form-label">ç‰¹åˆ¥ãªè¦æœ›ãŒã‚ã‚Œã°è¨˜å…¥ã—ã¦ãã ã•ã„</label>
            <textarea id="custom-request" name="custom-request" class="form-control" rows="3" 
              placeholder="ä¾‹: ç‰¹å®šã®è·æ¥­ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å«ã‚ãŸã„ã€ç‰¹æ®Šãªãƒˆãƒªãƒƒã‚¯ã‚’ä½¿ã„ãŸã„ã€ãªã©..."></textarea>
          </div>
        </div>

        <!-- ç”Ÿæˆãƒœã‚¿ãƒ³ -->
        <div class="form-actions">
          <button type="button" id="generate-btn" class="btn btn-primary">
            ğŸš€ ã‚·ãƒŠãƒªã‚ªç”Ÿæˆé–‹å§‹
          </button>
          
          <!-- ğŸ² å®Œå…¨ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆãƒœã‚¿ãƒ³ -->
          <button type="button" id="random-generate-btn" class="btn btn-secondary" style="margin-left: 15px;">
            ğŸ² å®Œå…¨ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆ
          </button>
          
          <div class="random-mode-info" style="margin-top: 10px; font-size: 0.9em; color: #666;">
            ğŸ’¡ å®Œå…¨ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆã¯ã€AIãŒå®Œå…¨ã«è‡ªå¾‹çš„ã«ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒŸã‚¹ãƒ†ãƒªãƒ¼ã‚’å‰µä½œã—ã¾ã™
          </div>
        </div>
      </form>
    </div>

    <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ -->
    <div id="loading-container" class="hidden">
      <div class="loading-content">
        <div class="loading-header">
          <h2>ğŸ­ ãƒãƒ¼ãƒ€ãƒ¼ãƒŸã‚¹ãƒ†ãƒªãƒ¼ç”Ÿæˆä¸­...</h2>
          <div class="loading-spinner"></div>
        </div>
        
        <div class="loading-info">
          <div class="current-phase" id="current-phase">AIç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³èµ·å‹•ä¸­...</div>
          <div class="phase-details" id="phase-details">æœ€é«˜å“è³ªã®ã‚·ãƒŠãƒªã‚ªã‚’ä½œæˆã—ã¦ã„ã¾ã™</div>
          
          <div class="progress-container">
            <div class="progress-bar">
              <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-stats">
              <span id="current-phase-number">0/9</span>
              <span id="estimated-time">æ¨å®šæ™‚é–“: ç´„ 5åˆ†</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="result-container" class="hidden">
      <div id="scenario-content"></div>
    </div>
  </main>

  <!-- JavaScript Dependencies -->
  <script src="js/SkeletonLoader.js"></script>
  <script src="js/UXEnhancer.js"></script>
  <script src="js/UltraIntegratedApp.js"></script>
  <script>
    // ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªåˆæœŸåŒ–
    let app;
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ† DOM Content Loaded - ã‚¢ãƒ—ãƒªåˆæœŸåŒ–é–‹å§‹');
      console.log('ğŸ” åˆæœŸDOMçŠ¶æ…‹ãƒã‚§ãƒƒã‚¯:', {
        generateBtn: !!document.getElementById('generate-btn'),
        randomBtn: !!document.getElementById('random-generate-btn'),
        form: !!document.getElementById('scenario-form'),
        readyState: document.readyState,
        bodyChildren: document.body.children.length
      });
      
      // UX enhancersã‚’å…ˆã«åˆæœŸåŒ–
      if (typeof SkeletonLoader !== 'undefined' && !window.skeletonLoader) {
        window.skeletonLoader = new SkeletonLoader();
        console.log('âœ… SkeletonLoader initialized globally');
      }
      if (typeof UXEnhancer !== 'undefined' && !window.uxEnhancer) {
        window.uxEnhancer = new UXEnhancer();
        console.log('âœ… UXEnhancer initialized globally');
      }
      
      // ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚’å³åº§ã«åˆæœŸåŒ–ï¼ˆé…å»¶ã‚’å‰Šé™¤ï¼‰
      try {
        console.log('ğŸš€ UltraIntegratedAppåˆæœŸåŒ–é–‹å§‹');
        app = new UltraIntegratedApp();
        console.log('âœ… UltraIntegratedApp initialized successfully');
        
        // åˆæœŸåŒ–å®Œäº†å¾Œã®è¿½åŠ ãƒã‚§ãƒƒã‚¯
        setTimeout(() => {
          console.log('ğŸ”„ åˆæœŸåŒ–å®Œäº†å¾Œãƒã‚§ãƒƒã‚¯:', {
            appExists: !!app,
            generateBtnListeners: document.getElementById('generate-btn')?._events || 'no _events property',
            randomBtnListeners: document.getElementById('random-generate-btn')?._events || 'no _events property'
          });
        }, 100);
        
      } catch (error) {
        console.error('âŒ CRITICAL: UltraIntegratedAppåˆæœŸåŒ–å¤±æ•—:', error);
        console.error('ğŸ“Š ã‚¨ãƒ©ãƒ¼è©³ç´°:', {
          message: error.message,
          stack: error.stack,
          name: error.name
        });
      }
      
      // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ï¼ˆã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆç”¨ï¼‰
      window.showTab = function(tabName) {
        if (app) {
          app.showTab(tabName);
        }
      };
      
      // ğŸš¨ EMERGENCY: å¼·åˆ¶ãƒœã‚¿ãƒ³ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³
      setTimeout(() => {
        console.log('ğŸš¨ EMERGENCY: ãƒœã‚¿ãƒ³å¼·åˆ¶ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹');
        
        const generateBtn = document.getElementById('generate-btn');
        const randomBtn = document.getElementById('random-generate-btn');
        
        if (generateBtn) {
          // æ—¢å­˜ã®ãƒªã‚¹ãƒŠãƒ¼ã‚’å‰Šé™¤ã—ã¦å†è¨­å®š
          const newGenerateBtn = generateBtn.cloneNode(true);
          generateBtn.parentNode.replaceChild(newGenerateBtn, generateBtn);
          
          newGenerateBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('ğŸ¯ EMERGENCY: ç”Ÿæˆãƒœã‚¿ãƒ³ç·Šæ€¥å®Ÿè¡Œ');
            if (app && app.validateForm && app.handleGenerationStart) {
              if (app.validateForm()) {
                app.handleGenerationStart();
              }
            } else {
              console.error('âŒ ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¾ãŸã¯ãƒ¡ã‚½ãƒƒãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
          });
          console.log('âœ… ç”Ÿæˆãƒœã‚¿ãƒ³ç·Šæ€¥ä¿®å¾©å®Œäº†');
        }
        
        if (randomBtn) {
          // æ—¢å­˜ã®ãƒªã‚¹ãƒŠãƒ¼ã‚’å‰Šé™¤ã—ã¦å†è¨­å®š
          const newRandomBtn = randomBtn.cloneNode(true);
          randomBtn.parentNode.replaceChild(newRandomBtn, randomBtn);
          
          newRandomBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('ğŸ² EMERGENCY: ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆãƒœã‚¿ãƒ³ç·Šæ€¥å®Ÿè¡Œ');
            if (app && app.handleRandomGeneration) {
              app.handleRandomGeneration();
            } else {
              console.error('âŒ ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¾ãŸã¯ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆãƒ¡ã‚½ãƒƒãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
          });
          console.log('âœ… ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆãƒœã‚¿ãƒ³ç·Šæ€¥ä¿®å¾©å®Œäº†');
        }
        
        console.log('ğŸ‰ EMERGENCY: ãƒœã‚¿ãƒ³ç·Šæ€¥ä¿®å¾©ä½œæ¥­å®Œäº†');
      }, 1000);
      
      // ãƒ‡ãƒãƒƒã‚°ç”¨ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°
      window.testButtonClick = function() {
        console.log('ğŸ§ª æ‰‹å‹•ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆé–‹å§‹');
        const generateBtn = document.getElementById('generate-btn');
        const randomBtn = document.getElementById('random-generate-btn');
        
        if (generateBtn) {
          console.log('ğŸ“‹ generate-btnçŠ¶æ…‹:', {
            disabled: generateBtn.disabled,
            style: generateBtn.style.cssText,
            events: generateBtn.onclick ? 'onclick exists' : 'no onclick'
          });
          generateBtn.click();
        }
        
        if (randomBtn) {
          console.log('ğŸ“‹ random-generate-btnçŠ¶æ…‹:', {
            disabled: randomBtn.disabled,
            style: randomBtn.style.cssText,
            events: randomBtn.onclick ? 'onclick exists' : 'no onclick'
          });
        }
      };
    });
  </script>
</body>
</html>