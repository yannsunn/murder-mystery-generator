<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Murder Mystery Generator - Professional Edition</title>
  <meta name="description" content="プロフェッショナル品質のマーダーミステリー生成システム - Console Error Free">
  <meta name="theme-color" content="#6d28d9">
  <meta name="color-scheme" content="dark light">
  
  <!-- PWA対応 -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Murder Mystery Generator">
  
  <!-- アクセシビリティ -->
  <meta name="robots" content="index, follow">
  <meta name="author" content="Murder Mystery Generator Team">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <!-- 🚀 ULTRA MODERN STYLES - 完全統合CSS -->
  <link rel="stylesheet" href="ultra-modern-styles.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%236d28d9'/><text y='65' x='50' text-anchor='middle' font-size='60' fill='white'>M</text></svg>">
</head>
<body class="ultra-high-contrast dark-optimized respect-motion">
  <!-- 🎯 アクセシビリティ - スキップリンク -->
  <a href="#main-content" class="skip-link">メインコンテンツへスキップ</a>
  
  <header>
    <h1>Murder Mystery Generator</h1>
    <p>AI駆動マーダーミステリー生成システム</p>
  </header>

  <main class="main-container" id="main-content" role="main" aria-label="マーダーミステリー生成システム">
    <div class="card bg-ultra-contrast" id="main-card">
      <div class="card-header">
        <h2>シナリオ生成システム</h2>
        <p>プロフェッショナル品質のマーダーミステリーシナリオを効率的に生成</p>
      </div>
      
      <!-- 統合フォーム -->
      <form id="scenario-form" class="form-container">
        <div class="form-section">
          <h3 class="text-gradient">🎮 基本設定</h3>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="participants" class="form-label">👥 参加人数</label>
              <select id="participants" name="participants" class="form-control" required 
                      aria-describedby="participants-hint" aria-label="マーダーミステリーの参加人数を選択">
                <option value="4">4人 (コンパクト)</option>
                <option value="5" selected>5人 (推奨)</option>
                <option value="6">6人 (標準)</option>
                <option value="7">7人 (大規模)</option>
                <option value="8">8人 (エピック)</option>
              </select>
              <div id="participants-hint" class="form-hint">推奨は5-6人です</div>
            </div>
            
            <div class="form-group">
              <label for="era" class="form-label">⏰ 時代背景</label>
              <select id="era" name="era" class="form-control" required>
                <option value="modern" selected>🏙️ 現代 (2020年代)</option>
                <option value="showa">🏮 昭和 (1926-1989)</option>
                <option value="near-future">🚀 近未来 (2030年代)</option>
                <option value="fantasy">🏰 ファンタジー</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="setting" class="form-label">🏢 舞台設定</label>
              <select id="setting" name="setting" class="form-control" required>
                <option value="closed-space" selected>🏠 閉鎖空間 (密室)</option>
                <option value="mountain-villa">🏔️ 山荘 (隔離)</option>
                <option value="military-facility">⚔️ 軍事施設</option>
                <option value="underwater-facility">🌊 海中施設</option>
                <option value="city">🌆 都市部</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="text-gradient">🌟 世界観とトーン</h3>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="worldview" class="form-label">🌍 世界観</label>
              <select id="worldview" name="worldview" class="form-control">
                <option value="realistic" selected>📱 リアル志向 (現実的)</option>
                <option value="occult">👻 オカルト要素あり</option>
                <option value="sci-fi">🛸 SF要素あり</option>
                <option value="mystery">🔍 純粋ミステリー</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="tone" class="form-label">🎭 雰囲気</label>
              <select id="tone" name="tone" class="form-control">
                <option value="serious" selected>😤 シリアス (本格派)</option>
                <option value="light">😊 ライト (カジュアル)</option>
                <option value="horror">😱 ホラー (恐怖)</option>
                <option value="comedy">🤣 コメディ (笑い)</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="complexity" class="form-label">⚙️ 難易度</label>
              <select id="complexity" name="complexity" class="form-control">
                <option value="simple">🔰 簡単 (30分)</option>
                <option value="standard" selected>⚖️ 標準 (45分)</option>
                <option value="complex">🧠 複雑 (60分)</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="text-gradient">🔍 事件設定</h3>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="motive" class="form-label">💰 犯行動機</label>
              <select id="motive" name="motive" class="form-control">
                <option value="random" selected>🎲 おまかせ (AI選択)</option>
                <option value="money">💰 金銭問題</option>
                <option value="revenge">⚔️ 復讐</option>
                <option value="love">💔 恋愛関係</option>
                <option value="jealousy">😡 嫉妬</option>
                <option value="secret">🤫 秘密の発覚</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="victim-type" class="form-label">👤 被害者タイプ</label>
              <select id="victim-type" name="victim-type" class="form-control">
                <option value="random" selected>🎲 おまかせ (AI選択)</option>
                <option value="wealthy">💎 資産家</option>
                <option value="celebrity">⭐ 有名人</option>
                <option value="businessman">💼 実業家</option>
                <option value="ordinary">👥 一般人</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="weapon" class="form-label">🔪 凶器</label>
              <select id="weapon" name="weapon" class="form-control">
                <option value="random" selected>🎲 おまかせ (AI選択)</option>
                <option value="knife">🔪 刃物</option>
                <option value="poison">☠️ 毒物</option>
                <option value="blunt">🔨 鈍器</option>
                <option value="unusual">🔧 変わった物</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="text-gradient">🎨 オプション設定</h3>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="generate-images" class="checkbox-label">
                <input type="checkbox" id="generate-images" name="generate-images" value="true" checked>
                <span class="checkmark"></span>
                🖼️ キャラクター画像を生成する
              </label>
              <div class="form-hint">AI生成によるキャラクターイラスト付き</div>
            </div>
            
            <div class="form-group">
              <label for="detailed-handouts" class="checkbox-label">
                <input type="checkbox" id="detailed-handouts" name="detailed-handouts" value="true" checked>
                <span class="checkmark"></span>
                📜 詳細なハンドアウトを作成
              </label>
              <div class="form-hint">より詳しいキャラクター設定</div>
            </div>
            
            <div class="form-group">
              <label for="gm-support" class="checkbox-label">
                <input type="checkbox" id="gm-support" name="gm-support" value="true" checked>
                <span class="checkmark"></span>
                🎓 GM支援ツール付き
              </label>
              <div class="form-hint">進行管理とヒント機能</div>
            </div>
          </div>
        </div>

        <!-- カスタム要求 -->
        <div class="form-section">
          <h3 class="text-gradient">✏️ カスタム要求 (オプション)</h3>
          <div class="form-group">
            <label for="custom-request" class="form-label">特別な要望があれば記入してください</label>
            <textarea id="custom-request" name="custom-request" class="form-control" rows="3" 
              placeholder="例: 特定の職業のキャラクターを含めたい、特殊なトリックを使いたい、など..."></textarea>
          </div>
        </div>

        <!-- 生成ボタン -->
        <div class="form-actions" role="group" aria-labelledby="generation-buttons-label">
          <h4 id="generation-buttons-label" class="visually-hidden">シナリオ生成オプション</h4>
          
          <button type="button" id="generate-btn" class="btn btn-primary btn-ultra-visible touch-target"
                  aria-describedby="generate-btn-desc">
            🚀 シナリオ生成開始
          </button>
          <div id="generate-btn-desc" class="visually-hidden">
            フォームで設定した条件に基づいてマーダーミステリーシナリオを生成します
          </div>
          
          <!-- 🎲 完全ランダム生成ボタン -->
          <button type="button" id="random-generate-btn" class="btn btn-secondary btn-ultra-visible touch-target" style="margin-left: 15px;"
                  aria-describedby="random-btn-desc">
            🎲 完全ランダム生成
          </button>
          <div id="random-btn-desc" class="visually-hidden">
            AIが完全に自律的にランダムなオリジナルミステリーを創作します
          </div>
          
          <div class="random-mode-info" style="margin-top: 10px; font-size: 0.9em; color: #666;" 
               aria-live="polite">
            💡 完全ランダム生成は、AIが完全に自律的にオリジナルミステリーを創作します
          </div>
        </div>
      </form>
    </div>

    <!-- 🎬 CINEMATIC LOADING - 映画的演出ローディング -->
    <div id="loading-container" class="hidden loading-ultra-visible" role="status" aria-live="polite" aria-label="シナリオ生成進行状況">
      <!-- 雰囲気オーバーレイ -->
      <div class="fog-overlay"></div>
      <div class="spotlight"></div>
      
      <div class="loading-content transform-3d">
        <div class="loading-header">
          <h2 class="typewriter-text">🎭 マーダーミステリー生成中...</h2>
          <div class="cinematic-loader">
            <div class="loading-spinner" aria-hidden="true"></div>
          </div>
        </div>
        
        <div class="loading-info card-3d">
          <div class="current-phase" id="current-phase" aria-live="polite">AI生成エンジン起動中...</div>
          <div class="phase-details" id="phase-details" aria-live="polite">最高品質のシナリオを作成しています</div>
          
          <div class="progress-container" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" 
               aria-labelledby="progress-label">
            <div id="progress-label" class="visually-hidden">生成進捗</div>
            <div class="progress-bar">
              <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-stats" aria-live="polite">
              <span id="current-phase-number">0/9</span>
              <span id="estimated-time">推定時間: 約 5分</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 🎪 RESULT PRESENTATION - 限界突破結果演出 -->
    <div id="result-container" class="hidden">
      <div class="evidence-board transform-3d">
        <div class="mystery-solved result-reveal">
          <div id="scenario-content" class="card-3d"></div>
          
          <!-- 証拠カードコンテナ -->
          <div id="evidence-cards" class="evidence-cards-container">
            <!-- 動的に生成される証拠カード -->
          </div>
          
          <!-- 接続線 -->
          <div id="connection-lines" class="connection-lines-container">
            <!-- 動的に生成される接続線 -->
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 🚀 CORE APP - 統合JavaScriptシステム (UltraIntegratedApp統合済み) -->
  <script src="js/core-app.js"></script>
  
</body>
</html>